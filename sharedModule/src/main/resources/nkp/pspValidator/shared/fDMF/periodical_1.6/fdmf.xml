<fDMF>

    <namespaces>
        <!--Zde jsou definovány jednotlivé jmenné prostory pro různé formáty. Uvedené prefixy musí být použité ve všech pravidlech. -->

        <!--prefix alto-->
        <namespace-alto>http://www.loc.gov/standards/alto/ns-v2#</namespace-alto>
        <!--prefix cmd-->
        <namespace-copyright_md>http://www.cdlib.org/inside/diglib/copyrightMD</namespace-copyright_md>
        <!--prefix dc-->
        <namespace-dublin_core>http://purl.org/dc/elements/1.1/</namespace-dublin_core>
        <!--prefix mets-->
        <namespace-mets>http://www.loc.gov/METS/</namespace-mets>
        <!--prefix mix-->
        <namespace-mix>http://www.loc.gov/mix/v20</namespace-mix>
        <!--prefix mods-->
        <namespace-mods>http://www.loc.gov/mods/v3</namespace-mods>
        <!--prefix oai_dc-->
        <namespace-oai_dc>http://www.openarchives.org/OAI/2.0/oai_dc/</namespace-oai_dc>
        <!--prefix premis-->
        <namespace-premis>info:lc/xmlns/premis-v2</namespace-premis>
        <!--prefix xlink-->
        <namespace-xlink>http://www.w3.org/1999/xlink</namespace-xlink>

    </namespaces>

    <pattern-def name="FILENAME">
        <description>Vzor pro obecný soubor/adresář. Určuje povolené znaky v názvech souborů/adresářů.</description>
        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">[a-z_\-\.]+</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">[a-z0-9_\-\.]+</expression>
    </pattern-def>

    <pattern-def name="INFO_FILENAME_FOR_PSP_ID_DETECTION">
        <description>Vzor pro nalezení souboru INFO pouze za účelem získání PSP-ID z jeho obsahu.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">info_.+\.xml</expression>
        <expression caseSensitive="false">info\.xml</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">info_.+\.xml</expression>
        <expression caseSensitive="true">info\.xml</expression>


    </pattern-def>

    <pattern-def name="INFO_FILENAME">
        <description>Vzor pro jméno souboru INFO.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">info_${PSP_ID}\.xml</expression>
        <expression>info\.xml</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">info_${PSP_ID}\.xml</expression>
        <expression>info\.xml</expression>

    </pattern-def>

    <pattern-def name="PRIMARY-METS_FILENAME">
        <description>Vzor pro jméno souboru PRIMARY-METS.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">mets_${PSP_ID}\.xml</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">mets_${PSP_ID}\.xml</expression>
    </pattern-def>

    <pattern-def name="CHECKSUM_FILENAME">
        <description>Vzor pro jméno souboru CHECKSUM.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">md5_${PSP_ID}\.md5</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">md5_${PSP_ID}\.md5</expression>
    </pattern-def>

    <pattern-def name="TOLERATED_TL_FILENAME">
        <description>Vzory pro jména tolerovaných souborů.</description>
        <expression caseSensitive="true">LTP_MD\.xml</expression>
    </pattern-def>

    <pattern-def name="SECONDARY-METS-DIR_FILENAME">
        <description>Vzor pro jméno adresáře SECONDARY-METS-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">amdsec</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">amdsec</expression>

    </pattern-def>

    <pattern-def name="OCR-TEXT-DIR_FILENAME">
        <description>Vzor pro jméno adresáře OCR-TEXT-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">txt</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">txt</expression>

    </pattern-def>

    <pattern-def name="OCR-ALTO-DIR_FILENAME">
        <description>Vzor pro jméno adresáře OCR-ALTO-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">alto</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">alto</expression>

    </pattern-def>

    <pattern-def name="MASTER-COPY-DIR_FILENAME">
        <description>Vzor pro jméno adresáře MASTER-COPY-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">mastercopy</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">mastercopy</expression>

    </pattern-def>

    <pattern-def name="USER-COPY-DIR_FILENAME">
        <description>Vzor pro jméno adresáře USER-COPY-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">usercopy</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">usercopy</expression>

    </pattern-def>

    <pattern-def name="SECONDARY-METS_FILENAME">
        <description>Vzor pro jména souborů SECONDARY-METS v rámci adresáře SECONDARY-METS-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">amd_mets_${PSP_ID}_[0-9]+\.xml</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">amd_mets_${PSP_ID}_[0-9]+\.xml</expression>

    </pattern-def>

    <pattern-def name="OCR-TEXT_FILENAME">
        <description>Vzor pro jména souborů OCR-TEXT v rámci adresáře OCR-TEXT-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">txt_${PSP_ID}_[0-9]+\.txt</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">txt_${PSP_ID}_[0-9]+\.txt</expression>

    </pattern-def>

    <pattern-def name="OCR-ALTO_FILENAME">
        <description>Vzor pro jména souborů OCR-ALTO v rámci adresáře OCR-ALTO-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">alto_${PSP_ID}_[0-9]+\.xml</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">alto_${PSP_ID}_[0-9]+\.xml</expression>

    </pattern-def>

    <pattern-def name="MASTER-COPY_FILENAME">
        <description>Vzor pro jména souborů MASTER-COPY v rámci adresáře MASTER-COPY-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">mc_${PSP_ID}_[0-9]+\.jp2</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">mc_${PSP_ID}_[0-9]+\.jp2</expression>

    </pattern-def>

    <pattern-def name="USER-COPY_FILENAME">
        <description>Vzor pro jména souborů USER-COPY v rámci adresáře USER-COPY-DIR.</description>

        <!--per<=1.4, mon<=1.0-->
        <!--<expression caseSensitive="false">uc_${PSP_ID}_[0-9]+\.jp2</expression>-->

        <!--per>=1.5, mon>=1.1-->
        <expression caseSensitive="true">uc_${PSP_ID}_[0-9]+\.jp2</expression>

    </pattern-def>

    <value-def name="PSP_DIR" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">PSP_DIR</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="PSP_ID" type="STRING">
        <evaluation functionName="getStringByXpath">
            <params>
                <value name="xml_file" type="FILE">
                    <!--pozor, tady se soubor INFO ziskava jinak, nez podle vzoru INFO_FILENAME.
                    Protoze PSP_ID teprve zjistujeme, nemuzeme pouzit vzor INFO_FILENAME, ten ma hodnotu promenne PSP_ID
                    jako svuj paramer.-->
                    <!--jeden kandidat na soubor INFO-->
                    <evaluation functionName="getFirstFileFromFileList">
                        <params>
                            <value name="files" type="FILE_LIST">
                                <!--kandidati na soubor INFO podle vzoru a v danem adresari-->
                                <evaluation functionName="findFilesInDirByPattern">
                                    <params>
                                        <value name="dir" type="FILE">
                                            <value-ref name="PSP_DIR"/>
                                        </value>
                                        <pattern name="pattern">
                                            <pattern-ref name="INFO_FILENAME_FOR_PSP_ID_DETECTION"/>
                                        </pattern>
                                    </params>
                                </evaluation>
                            </value>
                        </params>
                    </evaluation>
                </value>
                <value name="xpath" type="STRING">/info/packageid</value>
            </params>
        </evaluation>
    </value-def>


    <value-def name="INFO_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="INFO_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="PRIMARY-METS_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="PRIMARY-METS_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="CHECKSUM_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="CHECKSUM_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>


    <value-def name="TOLERATED_TL_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="TOLERATED_TL_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="INFO_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="INFO_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="PRIMARY-METS_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="PRIMARY-METS_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="CHECKSUM_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="CHECKSUM_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="SECONDARY-METS-DIR_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="SECONDARY-METS-DIR_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-TEXT-DIR_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="OCR-TEXT-DIR_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-ALTO-DIR_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="OCR-ALTO-DIR_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>


    <value-def name="MASTER-COPY-DIR_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="MASTER-COPY-DIR_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="USER-COPY-DIR_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="PSP_DIR"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="USER-COPY-DIR_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="SECONDARY-METS-DIR_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="SECONDARY-METS-DIR_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-TEXT-DIR_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="OCR-TEXT-DIR_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-ALTO-DIR_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="OCR-ALTO-DIR_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="MASTER-COPY-DIR_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="MASTER-COPY-DIR_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="USER-COPY-DIR_FILE" type="FILE">
        <evaluation functionName="getFirstFileFromFileList">
            <params>
                <value name="files" type="FILE_LIST">
                    <value-ref name="USER-COPY-DIR_FILES"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="SECONDARY-METS_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="SECONDARY-METS-DIR_FILE"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="SECONDARY-METS_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-TEXT_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="OCR-TEXT-DIR_FILE"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="OCR-TEXT_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="OCR-ALTO_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="OCR-ALTO-DIR_FILE"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="OCR-ALTO_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="MASTER-COPY_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="MASTER-COPY-DIR_FILE"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="MASTER-COPY_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <value-def name="USER-COPY_FILES" type="FILE_LIST">
        <evaluation functionName="findFilesInDirByPattern">
            <params>
                <value name="dir" type="FILE">
                    <value-ref name="USER-COPY-DIR_FILE"/>
                </value>
                <pattern name="pattern">
                    <pattern-ref name="USER-COPY_FILENAME"/>
                </pattern>
            </params>
        </evaluation>
    </value-def>

    <!--soubory XSD-->

    <value-def name="INFO_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">INFO_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ALTO_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">ALTO_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="CMD_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">CMD_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="DC_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">DC_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="METS_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">METS_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="MIX_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">MIX_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="MODS_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">MODS_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="PREMIS_XSD_FILE" type="FILE">
        <evaluation functionName="getProvidedFile">
            <params>
                <value name="file_id" type="STRING">PREMIS_XSD_FILE</value>
            </params>
        </evaluation>
    </value-def>

    <!--identifikátory-->

    <!--volume-->
    <value-def name="ID_TYPES_VOLUME_MANDATORY" type="STRING_LIST">
        <description>seznam povinných typů identifikátorů pro úroveň VOLUME</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">uuid</value>
                <value name="string" type="STRING">urnnbn</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_VOLUME_OPTIONAL" type="STRING_LIST">
        <description>seznam volitelných typů identifikátorů pro úroveň VOLUME</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">isbn</value>
                <value name="string" type="STRING">ismn</value>
                <value name="string" type="STRING">ccnb</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_VOLUME_PROHIBITED" type="STRING_LIST">
        <description>seznam zakázaných typů identifikátorů pro úroveň VOLUME</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">issn</value>
            </params>
        </evaluation>
    </value-def>

    <!--title-->
    <value-def name="ID_TYPES_TITLE_MANDATORY" type="STRING_LIST">
        <description>seznam povinných typů identifikátorů pro úroveň TITLE</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">uuid</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_TITLE_OPTIONAL" type="STRING_LIST">
        <description>seznam volitelných typů identifikátorů pro úroveň TITLE</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">isbn</value>
                <value name="string" type="STRING">ismn</value>
                <value name="string" type="STRING">ccnb</value>
                <value name="string" type="STRING">urnnbn</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_TITLE_PROHIBITED" type="STRING_LIST">
        <description>seznam zakázaných typů identifikátorů pro úroveň TITLE</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">issn</value>
            </params>
        </evaluation>
    </value-def>

    <!--internal part-->
    <value-def name="ID_TYPES_INTERNAL-PART_MANDATORY" type="STRING_LIST">
        <description>seznam povinných typů identifikátorů pro úroveň INTERNAL-PART</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">uuid</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_INTERNAL-PART_OPTIONAL" type="STRING_LIST">
        <description>seznam volitelných typů identifikátorů pro úroveň INTERNAL-PART</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">urnnbn</value>


            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_INTERNAL-PART_PROHIBITED" type="STRING_LIST">
        <description>seznam zakázaných typů identifikátorů pro úroveň INTERNAL-PART</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">issn</value>
                <value name="string" type="STRING">isbn</value>
                <value name="string" type="STRING">ismn</value>
                <value name="string" type="STRING">ccnb</value>
            </params>
        </evaluation>
    </value-def>

    <!--supplement-->
    <value-def name="ID_TYPES_SUPPLEMENT_MANDATORY" type="STRING_LIST">
        <description>seznam povinných typů identifikátorů pro úroveň SUPPLEMENT</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">uuid</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_SUPPLEMENT_OPTIONAL" type="STRING_LIST">
        <description>seznam volitelných typů identifikátorů pro úroveň SUPPLEMENT</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">urnnbn</value>


            </params>
        </evaluation>
    </value-def>

    <value-def name="ID_TYPES_SUPPLEMENT_PROHIBITED" type="STRING_LIST">
        <description>seznam zakázaných typů identifikátorů pro úroveň SUPPLEMENT</description>
        <evaluation functionName="buildListOfStrings">
            <params>
                <value name="string" type="STRING">issn</value>
                <value name="string" type="STRING">isbn</value>
                <value name="string" type="STRING">ismn</value>
                <value name="string" type="STRING">ccnb</value>
            </params>
        </evaluation>
    </value-def>

    <value-def name="INFO_IDENTIFIERS" type="IDENTIFIER_LIST">
        <description>seznam identifikátorů ze souboru INFO</description>
        <evaluation functionName="getIdentifiersFromInfoFile">
            <params>
                <value name="info_file" type="FILE">
                    <value-ref name="INFO_FILE"/>
                </value>
            </params>
        </evaluation>
    </value-def>

    <rules-section name="PSP ID" description="Identifikátor PSP">


        <!--psp id-->

        <!--<rule name="PSP_ID_DERIVED_FROM_TITLE_ID" level="WARNING">
            <description>PSP-ID musí být odvozen od některého z povolených identifikátorů.</description>
        </rule>-->

    </rules-section>


    <rules-section name="Struktura souborů" description="Struktura PSP balicku na urovni soboru">


        <!--právě jeden každý top-level soubor-->

        <rule name="SINGLE_INFO_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor INFO.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="INFO_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_PRIMARY-METS_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor PRIMARY-METS.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="PRIMARY-METS_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_CHECKSUM_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor CHECKSUM.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="CHECKSUM_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>


        <!--názvy top-level souborů obsahují povolené znaky-->

        <rule name="INFO_FILENAME_VALID" level="ERROR">
            <description>Název souboru INFO smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILENAME_VALID" level="ERROR">
            <description>Název souboru PRIMARY-METS smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILENAME_VALID" level="ERROR">
            <description>Název souboru CHECKSUM smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--top-level soubory nejsou adresáře-->

        <rule name="INFO_IS_NOT_DIR" level="ERROR">
            <description>Soubor INFO nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_IS_NOT_DIR" level="ERROR">
            <description>Soubor PRIMARY-METS nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_IS_NOT_DIR" level="ERROR">
            <description>Soubor CHECKSUM nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádné top-level soubory/adresáře kromě očekávaných a tolerovaných-->

        <rule name="TOLERATED_TL_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný tolerovaný soubor v kořenovém adresáři nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_TOLERATED_TL_FILES_EXIST" level="WARNING">
            <description>Neměl by existovat žádný tolerovaný soubor.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">0</value>
                </params>
            </validation>
            <!--
                        <validation functionName="CHECK_FILE_LIST_EMPTY">
                            <params>
                                <value name="files" type="FILE_LIST">
                                    <value-ref name="TOLERATED_TL_FILES"/>
                                </value>
                            </params>
                        </validation>-->
        </rule>

        <rule name="NO_OTHER_TOP_LEVEL_FILES_EXIST" level="ERROR">
            <description>Krome definovaných souborů a adresářů nesmí v kořenovém adresáři existovat žádný jiný soubor
                nebo adresář.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="PSP_DIR"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--právě jeden každý top-level adresář-->


        <rule name="SINGLE_SECONDARY-METS-DIR_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor (adresář) SECONDARY-METS-DIR.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_OCR-TEXT-DIR_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor (adresář) SINGLE_OCR-TEXT.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_OCR-ALTO-DIR_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor (adresář) OCR-ALTO-DIR.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_MASTER-COPY-DIR_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor (adresář) MASTER-COPY-DIR.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_USER-COPY-DIR_FILE_EXISTS" level="ERROR">
            <description>Musí existovat nanejvýše jeden soubor (adresář) USER-COPY-DIR.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>


        <!--názvy top-level adresářů obsahují povolené znaky-->

        <rule name="SECONDARY-METS-DIR_FILENAME_VALID" level="ERROR">
            <description>Název adresáře SECONDARY-METS-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT-DIR_FILENAME_VALID" level="ERROR">
            <description>Název adresáře OCR-TEXT-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO-DIR_FILENAME_VALID" level="ERROR">
            <description>Název adresáře OCR-ALTO-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY-DIR_FILENAME_VALID" level="ERROR">
            <description>Název adresáře MASTER-COPY-DIR musí obsahovat jen povolené znaky.
            </description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY-DIR_FILENAME_VALID" level="ERROR">
            <description>Název adresáře USER-COPY-DIR musí obsahovat jen povolené znaky.
            </description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--top-level adresáře jsou adresáře (ne obyčejné soubory)-->

        <rule name="SECONDARY-METS-DIR_IS_DIR" level="ERROR">
            <description>Soubor SECONDARY-METS-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT-DIR_IS_DIR" level="ERROR">
            <description>Soubor OCR-TEXT-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO-DIR_IS_DIR" level="ERROR">
            <description>Soubor OCR-ALTO-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY-DIR_IS_DIR" level="ERROR">
            <description>Soubor MASTER-COPY-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY-DIR_IS_DIR" level="ERROR">
            <description>Soubor USER-COPY-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--názvy souborů v top-level adresářích obsahují jen povolené znaky-->


        <rule name="SECONDARY-METS_FILENAMES_VALID" level="ERROR">
            <description>Všechny soubory SECONDARY-METS musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILENAMES_VALID" level="ERROR">
            <description>Všechny soubory OCR-TEXT musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILENAMES_VALID" level="ERROR">
            <description>Všechny soubory OCR-ALTO musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILENAMES_VALID" level="ERROR">
            <description>Všechny soubory MASTER-COPY musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILENAMES_VALID" level="ERROR">
            <description>Všechny soubory USER-COPY musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--počty souborů a délky názvů soborů v top-level adesářích-->

        <rule name="NUMBER_OF_FILES_IN_DIRS_MATCH" level="ERROR">
            <description>Počet souborů ve všech adresářích se musí shodovat.</description>
            <validation functionName="checkAllFileListsHaveSameSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--fadfad-->

        <rule name="SECONDARY-METS_FILENAMES_LENGTHS_SAME" level="ERROR">
            <description>Délky názvů všech souborů SECONDARY-METS musí být stejné. Tedy čísla stran jsou zarovnaná na
                stejný počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILENAMES_LENGTHS_SAME" level="ERROR">
            <description>Délky názvů všech souborů OCR-TEXT musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILENAMES_LENGTHS_SAME" level="ERROR">
            <description>Délky názvů všech souborů OCR-ALTO musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILENAMES_LENGTHS_SAME" level="ERROR">
            <description>Délky názvů všech souborů MASTER-COPY musí být stejné. Tedy čísla stran jsou zarovnaná na
                stejný počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILENAMES_LENGTHS_SAME" level="ERROR">
            <description>Délky názvů všech souborů USER-COPY musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádný ze souborů v top-level adresářích není adresář-->

        <rule name="SECONDARY-METS_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný soubor SECONDARY-METS nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný soubor OCR-TEXT nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný soubor OCR-ALTO nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný soubor MASTER-COPY nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_ARE_NOT_DIRS" level="ERROR">
            <description>Žádný soubor USER-COPY nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádné další soubory v top-level adresářích-->


        <rule name="NO_EXTRA_FILES_IN_SECONDARY-METS-DIR" level="ERROR">
            <description>Kromě souborů SECONDARY-METS nesmí adresář SECONDARY-METS-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_OCR-TEXT-DIR" level="ERROR">
            <description>Kromě souborů OCR-TEXT nesmí adresář OCR-TEXT-DIR obsahovat žádné další soubory.</description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_OCR-ALTO-DIR" level="ERROR">
            <description>Kromě souborů OCR-ALTO nesmí adresář OCR-ALTO-DIR obsahovat žádné další soubory.</description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_MASTER-COPY-DIR" level="ERROR">
            <description>Kromě souborů MASTER-COPY nesmí adresář MASTER-COPY-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_USER-COPY-DIR" level="ERROR">
            <description>Kromě souborů USER-COPY nesmí adresář USER-COPY-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

    </rules-section>


    <rules-section name="Soubor CHECKSUM"
                   description="Kontrola souboru CHECKSUM, odkazů na další soubory a shody kontrolních součtů.">

        <rule name="CHECKSUM_FILE_GENERATED_BY_GRAMMAR" level="WARNING">
            <description>Soubor CHECKSUM by měl být generován předepsanou ABNF gramatikou.</description>
            <validation functionName="checkChecksumFileGeneratedByGrammar">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILE_ALL_PATHS_MATCH_FILES" level="ERROR">
            <description>Soubor CHECKSUM musí obsahovat záznamy pro každý uvedený soubor a žádný jiný.</description>
            <validation functionName="checkChecksumFileAllPathsMatchFiles">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILE_ALL_CHECKSUMS_MATCH" level="ERROR">
            <description>Všechny kontrolní součty v souborů odkazovaných v souboru CHECKSUM musí souhlasit.
            </description>
            <validation functionName="checkChecksumFileAllChecksumsMatch">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


    </rules-section>

    <rules-section name="Soubor INFO"
                   description="Validace souboru INFO - odkazování na ostatní soubory, kontrolní součet pro soubor CHECKSUM, atd.">

        <rule name="INFO_XML_WELL_BUILT" level="ERROR">
            <description>Soubor INFO musí být korektní (well-built) xml soubor.</description>
            <validation functionName="checkXmlIsWellBuilt">
                <params>
                    <value name="xml_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <rule name="INFO_XML_VALID_BY_XSD" level="ERROR">
            <description>Soubor INFO musí být validní podle XML Schema (xsd).</description>
            <validation functionName="checkXmlIsValidByXsd">
                <params>
                    <value name="xml_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="xsd_file" type="FILE">
                        <value-ref name="INFO_XSD_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--METS Profile requirement id infoxml6-->
        <rule name="INFO_REFERENCES_PRIMARY-METS" level="ERROR">
            <description>Soubor INFO se musí odkazovat na soubor PRIMARY-METS přes element mainmets.</description>
            <validation functionName="checkInfoFileReferencesPrimaryMets">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--METS Profile requirement id infoxml13-->
        <rule name="INFO_ITEMTOTAL_MATCHES_ITEMS_COUNT" level="ERROR">
            <description>V souboru INFO musí počet elementů item souhlasit s hodnotou atributu itemtotal elementu
                itemlist.
            </description>
            <!--mozne delat i nejak takhle, zatim ale asi neni potreba takova variabilita-->
            <!--<validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="INFO_ITEMS"/>
                    </value>
                    <value name="size" type="INTEGER">
                        <value-ref name="INFO_ITELMTOTAL"/>
                    </value>
                </params>
            </validation>-->
            <validation functionName="checkInfoFileItemsCountMatchesItemtotal">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>

        </rule>

        <!--METS Profile requirement id infoxml13-->
        <rule name="INFO_ITEMLIST_REFERENCES_ALL_FILES" level="ERROR">
            <description>Soubor INFO se musí odkazovat na všechny uvedené soubory přes elementy item a na žádné další.
            </description>
            <validation functionName="checkInfoFileItemlistReferencesAllFiles">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--METS Profile requirement id infoxml14-->
        <rule name="INFO_CHECKSUM_FILE_CHECKSUM_MATCHES" level="ERROR">
            <description>Soubor INFO se musí odkazovat na existující soubor CHECKSUM přes element checksum a kontrolní
                součet se musí shodovat.
            </description>
            <validation functionName="checkInfoFileChecksumMatches">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--TODO:identifikatory v INFO-->


    </rules-section>

    <rules-section name="Identifikátory" description="">

        <rule name="INFO_NO_DUPLICATE_IDENTIFIERS" level="ERROR">
            <description>Soubor INFO nesmí obsahovat duplikované identifikátory (tedy více identifikátorů stejného
                typu).
            </description>
            <validation functionName="checkIdentifiersNoDuplicates">
                <params>
                    <value name="identifiers" type="IDENTIFIER_LIST">
                        <value-ref name="INFO_IDENTIFIERS"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--TODO: neni pritomen identifikator zakazaneho typu, warning-->

        TODO: identifikatory z INFO pouzit na "psp-id musi byt odvozen od nektereho z nich"

        <rule name="DC_IDENTIFIERS_NO_WHITE_SPACES" level="WARNING">
            <description>Identifikátory v Dublin Core záznamech by neměly obsahovat bílé znaky.</description>
            <validation functionName="checkDcIdentifiersDoNotContainWhiteSpaces">
                <params>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--TODO: pro kazdou uroven musi byt shoda id v DC a v  MODS-->


    </rules-section>


</fDMF>