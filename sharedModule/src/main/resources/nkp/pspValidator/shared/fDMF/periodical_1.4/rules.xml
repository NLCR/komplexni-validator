<fDMF>

    <description>
        Zde jsou definovány validační pravidla. K samotným validacím se používají validační funkce, jejichž parametry
        jsou definované proměnné, vzory a konstanty.
        Pravidla je možné dynamicky doplňovat/upravovat, ale je vždy nutné používat existující proměnné a vzory.
    </description>

    <rules-section name="Struktura souborů" description="Struktura PSP balicku na urovni soboru">


        <!--psp dir-->

        <!--mozna tohle patri spise k INFO?-->
        <!--TODO: spis pouzit pattern a checkFilenameMatchesPattern, kdyz matches-->
        <rule name="PSP_DIR_MATCHES_PSP_ID">
            <!--Tady warning, protože to zadání vyžaduje, nicméně DMF mluví jasně:
            <packageid> název kořenového adresáře balíčku viz kap. 6
            a METS Profil taky:
            There must be <packageid> element that contains name of package root directory.-->
            <description>Název kořenového adresáře musí být schodný s PSP-ID.</description>

            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="level" type="LEVEL">WARNING</value>
                    <value name="file" type="FILE">
                        <value-ref name="PSP_DIR"/>
                    </value>
                    <pattern name="pattern">
                        <expressions>
                            <expression caseSensitive="true">${PSP_ID}</expression>
                        </expressions>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--právě jeden každý top-level soubor-->

        <rule name="SINGLE_INFO_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor INFO. Pokud neexistuje, je soubor špatně pojmenován, nebo
                opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="INFO_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_PRIMARY-METS_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor PRIMARY-METS. Pokud neexistuje, je soubor špatně
                pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="PRIMARY-METS_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_CHECKSUM_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor CHECKSUM. Pokud neexistuje, je soubor špatně pojmenován,
                nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="CHECKSUM_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>


        <!--názvy top-level souborů obsahují povolené znaky-->

        <rule name="INFO_FILENAME_VALID">
            <description>Název souboru INFO smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILENAME_VALID">
            <description>Název souboru PRIMARY-METS smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILENAME_VALID">
            <description>Název souboru CHECKSUM smí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILE_HAS_PREFIX_MD5">
            <description>Název souboru CHECKSUM by měl začínat na md5_/MD5_.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="level" type="LEVEL">WARNING</value>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <expressions>
                            <expression caseSensitive="false">md5_.*</expression>
                        </expressions>
                    </pattern>
                </params>
            </validation>
        </rule>

        <!--top-level soubory nejsou adresáře-->

        <rule name="INFO_IS_NOT_DIR">
            <description>Soubor INFO nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_IS_NOT_DIR">
            <description>Soubor PRIMARY-METS nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_IS_NOT_DIR">
            <description>Soubor CHECKSUM nesmí být adresář, ale obyčejný soubor.</description>
            <validation functionName="checkFileIsNotDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádné top-level soubory/adresáře kromě očekávaných a tolerovaných-->

        <rule name="TOLERATED_TL_FILES_ARE_NOT_DIRS">
            <description>Žádný tolerovaný soubor v kořenovém adresáři nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_TOLERATED_TL_FILES_EXIST">
            <description>Neměl by existovat žádný tolerovaný soubor.</description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">0</value>
                    <value name="level" type="LEVEL">WARNING</value>
                </params>
            </validation>
            <!--
                        <validation functionName="CHECK_FILE_LIST_EMPTY">
                            <params>
                                <value name="files" type="FILE_LIST">
                                    <value-ref name="TOLERATED_TL_FILES"/>
                                </value>
                            </params>
                        </validation>-->
        </rule>

        <rule name="NO_OTHER_TOP_LEVEL_FILES_EXIST">
            <description>Krome definovaných souborů a adresářů nesmí v kořenovém adresáři existovat žádný jiný soubor
                nebo adresář.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="PSP_DIR"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="TOLERATED_TL_FILES"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--právě jeden každý top-level adresář-->


        <rule name="SINGLE_SECONDARY-METS-DIR_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor (adresář) SECONDARY-METS-DIR. Pokud neexistuje, je
                adresář špatně pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_OCR-TEXT-DIR_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor (adresář) SINGLE_OCR-TEXT. Pokud neexistuje, je adresář
                špatně pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_OCR-ALTO-DIR_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor (adresář) OCR-ALTO-DIR. Pokud neexistuje, je adresář
                špatně pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_MASTER-COPY-DIR_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor (adresář) MASTER-COPY-DIR. Pokud neexistuje, je adresář
                špatně pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>

        <rule name="SINGLE_USER-COPY-DIR_FILE_EXISTS">
            <description>Musí existovat nanejvýše jeden soubor (adresář) USER-COPY-DIR. Pokud neexistuje, je adresář
                špatně pojmenován, nebo opravdu chybí.
            </description>
            <validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY-DIR_FILES"/>
                    </value>
                    <value name="size" type="INTEGER">1</value>
                </params>
            </validation>
        </rule>


        <!--názvy top-level adresářů obsahují povolené znaky-->

        <rule name="SECONDARY-METS-DIR_FILENAME_VALID">
            <description>Název adresáře SECONDARY-METS-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT-DIR_FILENAME_VALID">
            <description>Název adresáře OCR-TEXT-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO-DIR_FILENAME_VALID">
            <description>Název adresáře OCR-ALTO-DIR musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY-DIR_FILENAME_VALID">
            <description>Název adresáře MASTER-COPY-DIR musí obsahovat jen povolené znaky.
            </description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY-DIR_FILENAME_VALID">
            <description>Název adresáře USER-COPY-DIR musí obsahovat jen povolené znaky.
            </description>
            <validation functionName="checkFilenameMatchesPattern">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--top-level adresáře jsou adresáře (ne obyčejné soubory)-->

        <rule name="SECONDARY-METS-DIR_IS_DIR">
            <description>Soubor SECONDARY-METS-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT-DIR_IS_DIR">
            <description>Soubor OCR-TEXT-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO-DIR_IS_DIR">
            <description>Soubor OCR-ALTO-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY-DIR_IS_DIR">
            <description>Soubor MASTER-COPY-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY-DIR_IS_DIR">
            <description>Soubor USER-COPY-DIR musí být adresář a ne obyčejný soubor.</description>
            <validation functionName="checkFileIsDir">
                <params>
                    <value name="file" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--názvy souborů v top-level adresářích obsahují jen povolené znaky-->


        <rule name="SECONDARY-METS_FILENAMES_VALID">
            <description>Všechny soubory SECONDARY-METS musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILENAMES_VALID">
            <description>Všechny soubory OCR-TEXT musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILENAMES_VALID">
            <description>Všechny soubory OCR-ALTO musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILENAMES_VALID">
            <description>Všechny soubory MASTER-COPY musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILENAMES_VALID">
            <description>Všechny soubory USER-COPY musí obsahovat jen povolené znaky.</description>
            <validation functionName="checkAllFilenamesMatchPattern">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <pattern name="pattern">
                        <pattern-ref name="FILENAME"/>
                    </pattern>
                </params>
            </validation>
        </rule>


        <!--počty souborů a délky názvů soborů v top-level adesářích-->

        <rule name="NUMBER_OF_FILES_IN_DIRS_MATCH">
            <description>Počet souborů ve všech adresářích se musí shodovat.</description>
            <validation functionName="checkAllFileListsHaveSameSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--fadfad-->

        <rule name="SECONDARY-METS_FILENAMES_LENGTHS_SAME">
            <description>Délky názvů všech souborů SECONDARY-METS musí být stejné. Tedy čísla stran jsou zarovnaná na
                stejný počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILENAMES_LENGTHS_SAME">
            <description>Délky názvů všech souborů OCR-TEXT musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILENAMES_LENGTHS_SAME">
            <description>Délky názvů všech souborů OCR-ALTO musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILENAMES_LENGTHS_SAME">
            <description>Délky názvů všech souborů MASTER-COPY musí být stejné. Tedy čísla stran jsou zarovnaná na
                stejný počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILENAMES_LENGTHS_SAME">
            <description>Délky názvů všech souborů USER-COPY musí být stejné. Tedy čísla stran jsou zarovnaná na stejný
                počet nul.
            </description>
            <validation functionName="checkFilenamesLengthsSame">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádný ze souborů v top-level adresářích není adresář-->

        <rule name="SECONDARY-METS_FILES_ARE_NOT_DIRS">
            <description>Žádný soubor SECONDARY-METS nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-TEXT_FILES_ARE_NOT_DIRS">
            <description>Žádný soubor OCR-TEXT nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="OCR-ALTO_FILES_ARE_NOT_DIRS">
            <description>Žádný soubor OCR-ALTO nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILES_ARE_NOT_DIRS">
            <description>Žádný soubor MASTER-COPY nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_ARE_NOT_DIRS">
            <description>Žádný soubor USER-COPY nesmí být adresář.</description>
            <validation functionName="checkNoFileIsDir">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>


        <!--žádné další soubory v top-level adresářích-->


        <rule name="NO_EXTRA_FILES_IN_SECONDARY-METS-DIR">
            <description>Kromě souborů SECONDARY-METS nesmí adresář SECONDARY-METS-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="SECONDARY-METS-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_OCR-TEXT-DIR">
            <description>Kromě souborů OCR-TEXT nesmí adresář OCR-TEXT-DIR obsahovat žádné další soubory.</description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="OCR-TEXT-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_OCR-ALTO-DIR">
            <description>Kromě souborů OCR-ALTO nesmí adresář OCR-ALTO-DIR obsahovat žádné další soubory.</description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="OCR-ALTO-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_MASTER-COPY-DIR">
            <description>Kromě souborů MASTER-COPY nesmí adresář MASTER-COPY-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="MASTER-COPY-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="NO_EXTRA_FILES_IN_USER-COPY-DIR">
            <description>Kromě souborů USER-COPY nesmí adresář USER-COPY-DIR obsahovat žádné další soubory.
            </description>
            <validation functionName="checkNoOtherFilesInDir">
                <params>
                    <value name="root_dir" type="FILE">
                        <value-ref name="USER-COPY-DIR_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

    </rules-section>


    <rules-section name="Soubor CHECKSUM"
                   description="Kontrola souboru CHECKSUM, odkazů na další soubory a shody kontrolních součtů.">

        <rule name="CHECKSUM_FILE_GENERATED_BY_GRAMMAR">
            <description>Soubor CHECKSUM by měl být generován předepsanou ABNF gramatikou.</description>
            <validation functionName="checkChecksumFileGeneratedByGrammar">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILE_ALL_PATHS_MATCH_FILES">
            <description>Soubor CHECKSUM musí obsahovat záznamy pro každý uvedený soubor a žádný jiný.</description>
            <validation functionName="checkChecksumFileAllPathsMatchFiles">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="CHECKSUM_FILE_ALL_CHECKSUMS_MATCH">
            <description>Všechny kontrolní součty v souborů odkazovaných v souboru CHECKSUM musí souhlasit.
            </description>
            <validation functionName="checkChecksumFileAllChecksumsMatch">
                <params>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>


    </rules-section>

    <rules-section name="Soubor INFO"
                   description="Validace souboru INFO - odkazování na ostatní soubory, kontrolní součet pro soubor CHECKSUM, atd.">

        <rule name="INFO_XML_WELL_BUILT">
            <description>Soubor INFO musí být korektní (well-built) xml soubor.</description>
            <validation functionName="checkXmlIsWellBuilt">
                <params>
                    <value name="xml_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="INFO_XML_VALID_BY_XSD">
            <description>Soubor INFO musí být validní podle XML Schema (xsd).</description>
            <validation functionName="checkXmlIsValidByXsd">
                <params>
                    <value name="xml_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="xsd_file" type="FILE">
                        <value-ref name="INFO_XSD_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--METS Profile requirement id infoxml6-->
        <rule name="INFO_REFERENCES_PRIMARY-METS">
            <description>Soubor INFO se musí odkazovat na soubor PRIMARY-METS přes element mainmets.</description>
            <validation functionName="checkInfoFileReferencesPrimaryMets">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--METS Profile requirement id infoxml13-->
        <rule name="INFO_ITEMTOTAL_MATCHES_ITEMS_COUNT">
            <description>V souboru INFO musí počet elementů item souhlasit s hodnotou atributu itemtotal elementu
                itemlist.
            </description>
            <!--mozne delat i nejak takhle, zatim ale asi neni potreba takova variabilita-->
            <!--<validation functionName="checkFilelistHasExactSize">
                <params>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="INFO_ITEMS"/>
                    </value>
                    <value name="size" type="INTEGER">
                        <value-ref name="INFO_ITELMTOTAL"/>
                    </value>
                </params>
            </validation>-->
            <validation functionName="checkInfoFileItemsCountMatchesItemtotal">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                </params>
            </validation>

        </rule>

        <!--METS Profile requirement id infoxml13-->
        <!--TODO: nahradit pozitim checkFileListsMatch a getFileListByXpath a nove funkce na spojeni souborů a seznamů souborů do jednoho seznamu podobně, jako u PRIMARY-METS_FILESEC_ALL_MASTER_COPY_FILES_REFERENCED-->
        <rule name="INFO_ITEMLIST_REFERENCES_ALL_FILES">
            <description>Soubor INFO se musí odkazovat na všechny uvedené soubory přes elementy item a na žádné další.
            </description>
            <validation functionName="checkInfoFileItemlistReferencesAllFiles">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                    <value name="file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--METS Profile requirement id infoxml14-->
        <rule name="INFO_CHECKSUM_FILE_CHECKSUM_MATCHES">
            <description>Soubor INFO se musí odkazovat na existující soubor CHECKSUM přes element checksum a kontrolní
                součet se musí shodovat.
            </description>
            <validation functionName="checkInfoFileChecksumMatches">
                <params>
                    <value name="info_file" type="FILE">
                        <value-ref name="INFO_FILE"/>
                    </value>
                    <value name="checksum_file" type="FILE">
                        <value-ref name="CHECKSUM_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--TODO:identifikatory v INFO-->


    </rules-section>

    <rules-section name="Identifikátory" description="">

        <!--psp id-->

        <rule name="PSP_ID_DERIVED_FROM_TITLE_ID">
            <description>PSP-ID by měl být odvozen od některého z identifikátorů titulu, navíc pouze typu 'urnnbn' nebo
                'uuid'.
            </description>
            <validation functionName="checkStringDerivedFromOneOfIdentifiers">
                <params>
                    <value name="string" type="STRING">
                        <value-ref name="PSP_ID"/>
                    </value>
                    <!--seznam identifikatoru-->
                    <value name="identifiers" type="IDENTIFIER_LIST">
                        <!--jeste omezeni na konkretni typy identifikatoru titulu, ze kterych muze byt psp-id odvozen-->
                        <evaluation functionName="filterIdentifersByTypes">
                            <params>
                                <!--seznam identifikatoru (bere se zde z identifikatoru nalezenych v souboru INFO (tj. jen identifikatory titulu)-->
                                <value name="identifiers" type="IDENTIFIER_LIST">
                                    <value-ref name="INFO_IDENTIFIERS"/>
                                </value>
                                <value name="types" type="STRING_LIST">
                                    <evaluation functionName="buildListOfStrings">
                                        <params>
                                            <value name="string" type="STRING">uuid</value>
                                            <value name="string" type="STRING">urnnbn</value>
                                        </params>
                                    </evaluation>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <!--seznam prefixu, ktere se odstranuji z hodnot identifikatoru pred hledanim shody-->
                    <value name="id_prefixes" type="STRING_LIST">
                        <evaluation functionName="buildListOfStrings">
                            <params>
                                <value name="string" type="STRING">cnb</value>
                                <value name="string" type="STRING">uuid:</value>
                                <value name="string" type="STRING">urn:nbn:cz:</value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="min_match_length" type="INTEGER">6</value>>
                </params>
            </validation>
        </rule>

        <!--info identifiers -->

        <rule name="INFO_NO_DUPLICATE_IDENTIFIERS">
            <description>Soubor INFO nesmí obsahovat duplikované identifikátory (tedy více identifikátorů stejného
                typu).
            </description>
            <validation functionName="checkIdentifiersNoDuplicates">
                <params>
                    <value name="identifier_list" type="IDENTIFIER_LIST">
                        <value-ref name="INFO_IDENTIFIERS"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--DC identifiers -->

        <rule name="DC_IDENTIFIERS_NO_WHITE_SPACES">
            <description>Identifikátory v Dublin Core záznamech by neměly obsahovat bílé znaky.</description>
            <validation functionName="checkDcIdentifiersDoNotContainWhiteSpaces">
                <params>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <!--title-->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_TITLE">
            <description>
                Úroveň TITLE musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_TITLE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_TITLE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">TITLE</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_TITLE">
            <description>
                Úroveň TITLE nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_TITLE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_TITLE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">TITLE</value>
                </params>
            </validation>
        </rule>

        <!--volume-->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_VOLUME">
            <description>
                Úroveň VOLUME musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_VOLUME")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_VOLUME_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">VOLUME</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_VOLUME">
            <description>
                Úroveň VOLUME nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_VOLUME")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_VOLUME_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">VOLUME</value>
                </params>
            </validation>
        </rule>

        <!--issue-->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_ISSUE">
            <description>
                Úroveň ISSUE musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_ISSUE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ISSUE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">ISSUE</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_ISSUE">
            <description>
                Úroveň ISSUE nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_ISSUE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ISSUE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">ISSUE</value>
                </params>
            </validation>
        </rule>

        <!--supplement-->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_SUPPLEMENT">
            <description>
                Úroveň SUPPLEMENT musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_SUPPL")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_SUPPLEMENT_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">SUPPLEMENT</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_SUPPLEMENT">
            <description>
                Úroveň SUPPLEMENT nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_SUPPL")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_SUPPLEMENT_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">SUPPLEMENT</value>
                </params>
            </validation>
        </rule>

        <!--article-->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_ARTICLE">
            <description>
                Úroveň ARTICLE musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_ART")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ARTICLE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">ARTICLE</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_ARTICLE">
            <description>
                Úroveň ARTICLE nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_ART")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ARTICLE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">ARTICLE</value>
                </params>
            </validation>
        </rule>

        <!-- picture -->
        <rule name="DC_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_PICTURE">
            <description>
                Úroveň PICTURE musí obsahovat všechny povinné identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_PICT")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_PICTURE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">PICTURE</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_PICTURE">
            <description>
                Úroveň PICTURE nesmí obsahovat žádné zakázané identifikátory v záznamu Dublin Core.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD_PICT")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_PICTURE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">PICTURE</value>
                </params>
            </validation>
        </rule>

        <rule name="DC_IDENTIFIERS_NO_DUPLICATES_WITHIN_DMDSEC">
            <description>Identifikátory v jednotlivých Dublin Core záznamech musí mít unikátní typ.
                Nesmí se tedy objevit dva a více identikátorů stejného typu v jednom záznamu.
            </description>

            <validation functionName="checkIdentifiersNoDuplicateTypes">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                        <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="DC_IDENTIFIERS_NO_DUPLICATES_ACROSS_DMDSECS">
            <description>Identifikátory napříč Dublin Core záznamech by měly být unikátní.
                Na různých úrovní popisu se tedy nesmí objevit dva totožné identifikátory (shodný typ i hodnota).
            </description>

            <validation functionName="checkIdentifiersNoDuplicates">
                <params>
                    <value name="identifier_list" type="IDENTIFIER_LIST">
                        <!--spojeni vsech identifikatoru do jednoho seznamu-->
                        <evaluation functionName="mergeIdentifiers">
                            <params>
                                <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                                    <!--seznam obsahujici seznam identifikatoru DC pro kazdy zaznam dmdSec pro dc-->
                                    <evaluation functionName="getDcIdentifiersForEachDmdsecId">
                                        <params>
                                            <value name="dmdsec_ids" type="STRING_LIST">
                                                <!--seznam identifikatoru (dmdSec ID)-->
                                                <evaluation functionName="getStringListByXpath">
                                                    <params>
                                                        <value name="xml_file" type="FILE">
                                                            <value-ref name="PRIMARY-METS_FILE"/>
                                                        </value>
                                                        <value name="xpath" type="STRING">
                                                            /mets:mets/mets:dmdSec[starts-with(@ID, "DCMD")]/@ID
                                                        </value>
                                                    </params>
                                                </evaluation>
                                            </value>
                                            <value name="mets_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <!--MODS identifiers -->

        <!--title-->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_TITLE">
            <description>
                Úroveň TITLE musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_TITLE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_TITLE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">TITLE</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_TITLE">
            <description>
                Úroveň TITLE nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_TITLE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_TITLE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">TITLE</value>
                </params>
            </validation>
        </rule>

        <!--volume-->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_VOLUME">
            <description>
                Úroveň VOLUME musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_VOLUME")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_VOLUME_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">VOLUME</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_VOLUME">
            <description>
                Úroveň VOLUME nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_VOLUME")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_VOLUME_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">VOLUME</value>
                </params>
            </validation>
        </rule>

        <!--issue-->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_ISSUE">
            <description>
                Úroveň ISSUE musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_ISSUE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ISSUE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">ISSUE</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_ISSUE">
            <description>
                Úroveň ISSUE nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_ISSUE")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ISSUE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">ISSUE</value>
                </params>
            </validation>
        </rule>

        <!--supplement-->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_SUPPLEMENT">
            <description>
                Úroveň SUPPLEMENT musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_SUPPL")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_SUPPLEMENT_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">SUPPLEMENT</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_SUPPLEMENT">
            <description>
                Úroveň SUPPLEMENT nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_SUPPL")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_SUPPLEMENT_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">SUPPLEMENT</value>
                </params>
            </validation>
        </rule>

        <!--article-->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_ARTICLE">
            <description>
                Úroveň ARTICLE musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_ART")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ARTICLE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">ARTICLE</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_ARTICLE">
            <description>
                Úroveň ARTICLE nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_ART")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_ARTICLE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">ARTICLE</value>
                </params>
            </validation>
        </rule>

        <!-- picture -->
        <rule name="MODS_MANDATORY_IDENTIFIERS_PRESENT_LEVEL_PICTURE">
            <description>
                Úroveň PICTURE musí obsahovat všechny povinné identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersAllTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_PICT")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_PICTURE_MANDATORY"/>
                    </value>
                    <value name="level_name" type="STRING">PICTURE</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_PROHIBITED_IDENTIFIERS_NOT_PRESENT_LEVEL_PICTURE">
            <description>
                Úroveň PICTURE nesmí obsahovat žádné zakázané identifikátory v záznamu MODS.
            </description>
            <validation functionName="checkIdentifiersNoTypesPresent">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD_PICT")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                    <value name="id_types" type="STRING_LIST">
                        <value-ref name="ID_TYPES_PICTURE_PROHIBITED"/>
                    </value>
                    <value name="level_name" type="STRING">PICTURE</value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_IDENTIFIERS_NO_DUPLICATES_WITHIN_DMDSEC">
            <description>Identifikátory v jednotlivých MODS záznamech musí mít unikátní typ.
                Nesmí se tedy objevit dva a více identikátorů stejného typu v jednom záznamu.
            </description>

            <validation functionName="checkIdentifiersNoDuplicateTypes">
                <params>
                    <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                        <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                        <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                            <params>
                                <value name="dmdsec_ids" type="STRING_LIST">
                                    <!--seznam identifikatoru (dmdSec ID)-->
                                    <evaluation functionName="getStringListByXpath">
                                        <params>
                                            <value name="xml_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                            <value name="xpath" type="STRING">
                                                /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD")]/@ID
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                                <value name="mets_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="MODS_IDENTIFIERS_NO_DUPLICATES_ACROSS_DMDSECS">
            <description>Identifikátory napříč MODS záznamy by měly být unikátní.
                Na různých úrovní popisu se tedy nesmí objevit dva totožné identifikátory (shodný typ i hodnota).
            </description>

            <validation functionName="checkIdentifiersNoDuplicates">
                <params>
                    <value name="identifier_list" type="IDENTIFIER_LIST">
                        <!--spojeni vsech identifikatoru do jednoho seznamu-->
                        <evaluation functionName="mergeIdentifiers">
                            <params>
                                <value name="identifier_list_list" type="IDENTIFIER_LIST_LIST">
                                    <!--seznam obsahujici seznam identifikatoru pro kazdy zaznam dmdSec pro MODS-->
                                    <evaluation functionName="getModsIdentifiersForEachDmdsecId">
                                        <params>
                                            <value name="dmdsec_ids" type="STRING_LIST">
                                                <!--seznam identifikatoru (dmdSec ID)-->
                                                <evaluation functionName="getStringListByXpath">
                                                    <params>
                                                        <value name="xml_file" type="FILE">
                                                            <value-ref name="PRIMARY-METS_FILE"/>
                                                        </value>
                                                        <value name="xpath" type="STRING">
                                                            /mets:mets/mets:dmdSec[starts-with(@ID, "MODSMD")]/@ID
                                                        </value>
                                                    </params>
                                                </evaluation>
                                            </value>
                                            <value name="mets_file" type="FILE">
                                                <value-ref name="PRIMARY-METS_FILE"/>
                                            </value>
                                        </params>
                                    </evaluation>
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <!--shoda identifikatorů v mods, dc-->
        <rule name="PRIMARY-METS_DC_IDENTIFIER_MATCH_MODS_IDENTIFIERS">
            <description>Identifikátory v DC se musí shodovat s identifikátory v MODS pro všechny úrovně popisu.
            </description>
            <validation functionName="checkPrimaryMetsDcIdentifiersMatchModsIdentifiers">
                <params>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

    </rules-section>

    <rules-section name="Primary METS filesec" description="">

        <rule name="PRIMARY-METS_FILESEC_ALL_FILEGROUPS_PRESENT">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí obsahovat elementy mets:fileGrp s definovanými
                hodnotami ID a USE a žádné další.
            </description>
            <validation functionName="checkPrimaryMetsFilesecContainsAllFilegroups">
                <params>
                    <value name="primary-mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_MASTER_COPY_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="MC_IMGGRP" obsahovat odkazy na všechny soubory MASTER-COPY a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>

                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='MC_IMGGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_USER_COPY_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="UC_IMGGRP" obsahovat odkazy na všechny soubory USER-COPY a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>

                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='UC_IMGGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_OCR_TEXT_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="TXTGRP" obsahovat odkazy na všechny soubory OCR-TEXT a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="OCR-TEXT_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>

                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='TXTGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_OCR_ALTO_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="ALTOGRP" obsahovat odkazy na všechny soubory OCR-ALTO a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="OCR-ALTO_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>

                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='ALTOGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_SECONDARY_METS_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="TECHMDGRP" obsahovat odkazy na všechny soubory SECONDARY-METS a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>
                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='TECHMDGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_ALL_SECONDARY_METS_FILES_REFERENCED">
            <description>Element mets:fileSec v souboru PRIMARY-METS musí v elementu mets:fileGroup s atributem
                ID="TECHMDGRP" obsahovat odkazy na všechny soubory SECONDARY-METS a žádné jiné.
            </description>
            <validation functionName="checkFileListsMatch">
                <params>
                    <value name="expected_files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                    <value name="found_files" type="FILE_LIST">
                        <evaluation functionName="getFileListByXpath">
                            <params>
                                <value name="psp_dir" type="FILE">
                                    <value-ref name="PSP_DIR"/>
                                </value>
                                <value name="xml_file" type="FILE">
                                    <value-ref name="PRIMARY-METS_FILE"/>
                                </value>
                                <value name="xpath" type="STRING">
                                    /mets:mets/mets:fileSec/mets:fileGrp[@ID='TECHMDGRP']/mets:file/mets:FLocat[@LOCTYPE='URL']/@xlink:href
                                </value>
                            </params>
                        </evaluation>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_SIZES_MATCH">
            <description>Velikosti souborů v bytech uvedené v atributu SIZE všech elementů mets:file se musí shodovat se
                skutečnými velikostmi souborů odkazovaných v elementech mets:FLocat.
            </description>
            <validation functionName="checkMetsFilesecSizesMatch">
                <params>
                    <value name="psp_dir" type="FILE">
                        <value-ref name="PSP_DIR"/>
                    </value>
                    <value name="mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

        <rule name="PRIMARY-METS_FILESEC_CHECKSUMS_MATCH">
            <description>Kontrolní součty souborů uvedené v atributu CHECKSUM všech elementů mets:file se musí shodovat
                s vypočítanými kontrolními součty souborů odkazovaných v elementech mets:FLocat.
            </description>
            <validation functionName="checkMetsFilesecChecksumsMatch">
                <params>
                    <value name="psp_dir" type="FILE">
                        <value-ref name="PSP_DIR"/>
                    </value>
                    <value name="mets_file" type="FILE">
                        <value-ref name="PRIMARY-METS_FILE"/>
                    </value>
                </params>
            </validation>
        </rule>

    </rules-section>

    <rules-section name="Secondary METS filesec" description="">

        <!--TODO: dodelat-->

        <rule name="SECONDARY-METS_FILESEC_ALL_FILEGROUPS_PRESENT">
            <description>Element mets:fileSec v každém souboru SECONDARY-METS musí obsahovat elementy mets:fileGrp s
                definovanými hodnotami ID a USE a žádné další.
            </description>
            <validation functionName="checkSecondaryMetsFilesecContainsAllFilegroups">
                <params>
                    <value name="secondary-mets_files" type="FILE_LIST">
                        <value-ref name="SECONDARY-METS_FILES"/>
                    </value>
                </params>
            </validation>
        </rule>


    </rules-section>

    <rules-section name="JPEG 2000"
                   description="Kontrola obrázků MASTER-COPY a USER-COPY v JPEG 2000 za pomocí externích nástrojů">

        <rule name="MASTER-COPY_FILES_VALID_BY_JPYLYZER">
            <description>Všechny soubory MASTER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj Jpylyzer.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">MASTER</value>
                    <value name="util" type="IMAGE_UTIL">JPYLYZER</value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_VALID_BY_JPYLYZER">
            <description>Všechny soubory USER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj Jpylyzer.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">USER</value>
                    <value name="util" type="IMAGE_UTIL">JPYLYZER</value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILES_VALID_BY_JHOVE">
            <description>Všechny soubory MASTER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj JHOVE.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">MASTER</value>
                    <value name="util" type="IMAGE_UTIL">JHOVE</value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_VALID_BY_JHOVE">
            <description>Všechny soubory USER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj JHOVE.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">USER</value>
                    <value name="util" type="IMAGE_UTIL">JHOVE</value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILES_VALID_BY_KAKADU">
            <description>Všechny soubory MASTER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj Kakadu.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">MASTER</value>
                    <value name="util" type="IMAGE_UTIL">KAKADU</value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_VALID_BY_KAKADU">
            <description>Všechny soubory USER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj Kakadu.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">USER</value>
                    <value name="util" type="IMAGE_UTIL">KAKADU</value>
                </params>
            </validation>
        </rule>

        <rule name="MASTER-COPY_FILES_VALID_BY_IMAGE_MAGICK">
            <description>Všechny soubory MASTER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj ImageMagick.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="MASTER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">MASTER</value>
                    <value name="util" type="IMAGE_UTIL">IMAGE_MAGICK</value>
                </params>
            </validation>
        </rule>

        <rule name="USER-COPY_FILES_VALID_BY_IMAGE_MAGICK">
            <description>Všechny soubory USER-COPY musí být validní vůči profilu JPEG 2000 pro nástroj ImageMagick.
            </description>
            <validation functionName="checkImageFilesValidByExternalUtil">
                <params>
                    <value name="level" type="LEVEL">ERROR</value>
                    <value name="files" type="FILE_LIST">
                        <value-ref name="USER-COPY_FILES"/>
                    </value>
                    <value name="copy" type="IMAGE_COPY">USER</value>
                    <value name="util" type="IMAGE_UTIL">IMAGE_MAGICK</value>
                </params>
            </validation>
        </rule>


    </rules-section>


</fDMF>